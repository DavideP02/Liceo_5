\documentclass[a4paper, twoside, titlepage]{book}

\usepackage[utf8]{inputenc}
\usepackage[italian]{babel}
\usepackage{graphicx}
\usepackage{caption}
	\captionsetup{format=hang,labelfont={sf,bf}}
\usepackage{multicol}
\usepackage{ulem}
\usepackage{lipsum} 
\usepackage[leqno,intlimits]{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{yhmath}
\usepackage[leqno,fleqn,intlimits]{empheq}
\usepackage{pgfplots}
	\pgfplotsset{/pgf/number format/use comma,compat=newest}
\usepackage{xcolor}
\usepackage{framed}
\usepackage{cancel}
\usepackage{ifthen}
\usepackage{intcalc}
\usepackage[most]{tcolorbox}
\usepackage{forest}
\usepackage{booktabs}
\usepackage{eso-pic}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Comandi per la creazione del riquadro attorno alle equazioni

	\newif\ifmarg
	\margtrue
	\ifmarg
	\makeatletter
	\let\mytagform@=\tagform@
	\def\tagform@#1{\maketag@@@{\mbox{~}\hbox{\rlap{\hspace{0.5in}(\ignorespaces#1\unskip\@@italiccorr)}}}\kern1sp}
	\renewcommand{\eqref}[1]{{\mytagform@{\ref{#1}}}}
	\makeatother
	\fi
	
	\newcommand*\mygraybox[0]{%
		\tcbhighmath}
		
	\newcommand{\equazione}[1]{	\begin{empheq}[box=\mygraybox]{equation*}
			#1
		\end{empheq}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Creazione dell'ambiente ``NOTA'' 

		\newlength\sidebar
		\newlength\envrule
		\newlength\envborder
		\setlength\sidebar{1.5mm}
		\setlength\envrule{0.4pt}
		\setlength\envborder{2.5mm}
		
		\makeatletter
		\long\def\fboxs#1{%
		  \leavevmode
		  \setbox\@tempboxa\hbox{%
		    \color@begingroup
		      \kern\fboxsep{#1}\kern\fboxsep
		    \color@endgroup}%
		  \@frames@x\relax}
		\def\frameboxs{%
		  \@ifnextchar(%)
		    \@framepicbox{\@ifnextchar[\@frameboxs\fboxs}}
		\def\@frameboxs[#1]{%
		  \@ifnextchar[%]
		    {\@iframeboxs[#1]}%
		    {\@iframeboxs[#1][c]}}
		\long\def\@iframeboxs[#1][#2]#3{%
		  \leavevmode
		  \@begin@tempboxa\hbox{#3}%
		    \setlength\@tempdima{#1}%
		    \setbox\@tempboxa\hb@xt@\@tempdima
		         {\kern\fboxsep\csname bm@#2\endcsname\kern\fboxsep}%
		    \@frames@x{\kern-\fboxrule}%
		  \@end@tempboxa}
		\def\@frames@x#1{%
		  \@tempdima\fboxrule
		  \advance\@tempdima\fboxsep
		  \advance\@tempdima\dp\@tempboxa
		  \hbox{%
		    \lower\@tempdima\hbox{%
		      \vbox{%
		        %\hrule\@height\fboxrule
		        \hbox{%
		         \vrule\@width\fboxrule
		          #1%
		          \vbox{%
		            \vskip\fboxsep
		            \box\@tempboxa
		            \vskip\fboxsep}%
		          #1%
		          }%\vrule\@width\fboxrule}%
		        }%\hrule\@height\fboxrule}%
		                          }%
		        }%
		}
		\def\esefcolorbox#1#{\esecolor@fbox{#1}}
		\def\esecolor@fbox#1#2#3{%
		  \color@b@x{\fboxsep\z@\color#1{#2}\fboxs}{\color#1{#3}}}
		\makeatother
		
		\definecolor{exampleborder}{rgb}{0.5, 0.5, 0.5}
		\definecolor{examplebg}{rgb}{0.89, 0.89, 0.89}
		\definecolor{statementborder}{rgb}{.9,0,0}
		\definecolor{statementbg}{rgb}{1,.9,.9}
		
		\newenvironment{eseframed}{%
		  \def\FrameCommand{\fboxrule=\the\sidebar  \fboxsep=\the\envborder%
		  \esefcolorbox{exampleborder}{examplebg}}%
		  \MakeFramed{\FrameRestore}}%
		 {\endMakeFramed}
		
		\newenvironment{nota}[1]
		{\par\medskip%\refstepcounter{esempio}%
		\hbox{%
		\fboxsep=\the\sidebar\hspace{-\envborder}\hspace{-.5\sidebar}%
		\colorbox{exampleborder}{%
		\hspace{\envborder}\footnotesize\sffamily\bfseries%
		\textcolor{white}{{{\large
		#1}}\hspace{\envborder}}
		}
		}
		\nointerlineskip\vspace{-\topsep}%
		\begin{eseframed}\noindent\ignorespaces%
		}
		{\end{eseframed}\vspace{-\baselineskip}\medskip}
		
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Comandi dei triangoli di tartaglia

	\newcounter{tartaglia}
	\newcounter{newton}
	\newcounter{i}% contatore delle righe
	\newcounter{j}% contatore delle colonne
	\newcounter{n}% Ã¨ il numero massimo di righe
	\newcounter{I}% contatori di servizio
	\newcounter{J}%
	
	%creazione del comando ``cbinomiale''
	\newcommand{\cbinomiale}[2]{%
		\intcalcDiv{\intcalcFac{#1}}{\intcalcMul{\intcalcFac{#2}}{\intcalcFac{\intcalcSub{#1}{#2}}}}
	}
	
	%creazione del comando ``Binomio di Newton''
		\newcommand{\newton}[1]{%
			\stepcounter{newton}%
			\setcounter{i}{1}%
			\setcounter{j}{0}%
			\setcounter{n}{#1}%
				\begin{center}
				\begin{tikzpicture}[node distance=15 mm]
					\node (\thenewton_n0_0){$\displaystyle\binom{0}{0}$};
					\whiledo{\thei<\then}{%
					\setcounter{I}{\thei}%
					\addtocounter{I}{-1}%
						\whiledo{\thej<\thei}{%
							\setcounter{J}{\thei}%
							\addtocounter{J}{-1}%
								\node[below left of=\thenewton_n\theI_\thej](\thenewton_n\thei_\thej){$\displaystyle\binom{\thei}{\thej}$};
								\stepcounter{j}%
							}
						\node[below right of=\thenewton_n\theI_\theJ](\thenewton_n\thei_\thej){$\displaystyle\binom{\thei}{\thej}$};
						\stepcounter{i}%
						\setcounter{j}{0}%
					}
				\end{tikzpicture}
				\end{center}
	}
		
	%creazione del comando ``Triangolo di Tartaglia''
		\newcommand{\tartaglia}[2]{%
			\stepcounter{tartaglia}%
			\setcounter{i}{1}%
			\setcounter{j}{0}%
			\setcounter{n}{#1}%
				\begin{center}
				\begin{tikzpicture}[node distance=#2 mm]
					\node (\thetartaglia_t0_0){\cbinomiale{0}{0}};
					\whiledo{\thei<\then}{%
					\setcounter{I}{\thei}%
					\addtocounter{I}{-1}%
						\whiledo{\thej<\thei}{%
							\setcounter{J}{\thei}%
							\addtocounter{J}{-1}%
								\node[below left of=\thetartaglia_t\theI_\thej](\thetartaglia_t\thei_\thej){\cbinomiale{\thei}{\thej}};
								\stepcounter{j}%
							}
						\node[below right of=\thetartaglia_t\theI_\theJ](\thetartaglia_t\thei_\thej){\cbinomiale{\thei}{\thej}};
						\stepcounter{i}%
						\setcounter{j}{0}%
					}
				\end{tikzpicture}
				\end{center}
	}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%ridefinizione comandi
	\newcommand{\example}{\paragraph{Esempio}}
	\newcommand{\tesi}{\noindent\textit{tesi.}\hspace{1em}}
	\newcommand{\gradi}{$^\text{o}$ }
	\newcommand{\CE}{\text{CE}\hspace{0.5em}}
	\newcommand{\pin}[1]{\frac{\pi}{#1}}
	\newcommand{\modulo}[2]{\Big[#1\Big]_{#2}}
	\newcommand{\pimod}[1]{\Big[#1\Big]_{2\pi}}
	\DeclareMathOperator{\arcsec}{arcsec}
	\DeclareMathOperator{\arccot}{arccot}
	\DeclareMathOperator{\arccsc}{arccsc}
	\newcommand{\R}{\mathbb{R}}
	\newcommand{\mezzo}{\frac{1}{2}}
	\newcommand{\pimezzi}{\frac{\pi}{2}}
	\newcommand{\mm}[1]{$\displaystyle#1$}
	
%definizioni particolari
\newcommand{\straniero}[1]{\textit{#1}} %parole straniere
\newcommand{\titolo}[1]{\textsc{#1}} %titoli
\newcommand{\evid}[1]{\textbf{\textcolor{blue}{#1}}} %parole evidenziate
\newcommand{\salt}{\hspace{1em}[...]} %comando per la creazione dei puntini di sospensione tra quadre

%definire le dimensioni della pagina
\usepackage{geometry}
\geometry{top=5.5cm, left=125pt, right=125pt,%
heightrounded}

%definire header e footer
\usepackage{fancyhdr}
\pagestyle{fancy}

\usepackage{calc}% so we can do inline math within \setlength
% Set the head width to be the full page width
\newlength{\oddmarginwidth}
\setlength{\oddmarginwidth}{22mm+\hoffset+\oddsidemargin}
\newlength{\evenmarginwidth}
\setlength{\evenmarginwidth}{\evensidemargin+22mm}
\fancyhfoffset[LO,RE]{\oddmarginwidth}
\fancyhfoffset[LE,RO]{\evenmarginwidth}

    \renewcommand{\headrulewidth}{0.75pt}
    \renewcommand{\footrulewidth}{0.75pt}
    \fancyhead{}
	\fancyfoot[C]{\thepage}
	\fancyfoot[R]{\textbf{Elaborati Esame di Stato 20-21}}
	\geometry{top=5.5cm, left=125pt, right=125pt, headsep=11.47mm, headheight=32.82mm, footskip=23.73mm,%
	heightrounded}
%

%rimuovere header e footer dalle pagine vuote
\makeatletter
\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
    \hbox{}
    \vspace*{\fill}
    \vspace{\fill}
    \thispagestyle{empty}
    \newpage
    \if@twocolumn\hbox{}\newpage\fi\fi\fi}
\makeatother
% 

\usepackage[nouppercase]{frontespizio}

\usepackage[pdftex,
            pdfauthor={Davide Peccioli},
            pdftitle={Analisi numerica e applicazioni},
            pdfsubject={Matematica e fisica}]{hyperref}
\hypersetup{
	  colorlinks=true,
	  linkcolor=blue,
	  filecolor=blue,
	  citecolor = black,      
	  urlcolor=cyan,
	  }

\usepackage{layout}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\title{Analisi numerica e applicazioni}
\date{Classe 5\textsuperscript{o}\,H}
\author{Davide Peccioli}

\begin{document}

\maketitle\thispagestyle{fancy}

\chapter{Lorem Ipsum}\thispagestyle{fancy}

\setcounter{page}{1}
\lipsum
\newpage
\layout

\end{document}